<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>News</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">

    <!-- CSS here -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/css/ticker-style.css">
    <link rel="stylesheet" href="/css/flaticon.css">
    <link rel="stylesheet" href="/css/slicknav.css">
    <link rel="stylesheet" href="/css/animate.min.css">
    <link rel="stylesheet" href="/css/magnific-popup.css">
    <link rel="stylesheet" href="/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/css/themify-icons.css">
    <link rel="stylesheet" href="/css/slick.css">
    <link rel="stylesheet" href="/css/nice-select.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

    <style>
        /* Add custom CSS for image scaling */
        .post-content img {
            width: 100%;
            height: auto;
            object-fit: cover;
            max-width: 100%;
            display: block;
        }

        /* Optional: Add styles for main content area */
        main {
            padding: 20px;
        }

        /* Additional styling for cards */
        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .card-body {
            padding: 20px;
        }
    </style>
</head>

<body>

    <%- include('./partials/header.ejs') %>

    <main>
        <section class="post-content">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <!-- Post Details -->
                        <div class="card mb-4">
                            <div class="card-body">
                                <% if (category) { %>
                                    <p class="text-muted mb-1">
                                        <i class="fas fa-folder-open me-1"></i> 
                                        <span class="fw-bold"><%- category.categoryName %></span>
                                    </p>
                                <% } else { %>
                                    <p class="text-muted mb-1">
                                        <i class="fas fa-folder-open me-1"></i> 
                                        <span class="fw-bold">Uncategorized</span>
                                    </p>
                                <% } %>
                                <h2 class="card-title text-primary mb-3"><%- post.title %></h2>
                                <div class="d-flex justify-content-between text-muted mb-3">
                                    <small><i class="far fa-calendar-alt me-1"></i> <%- new Date(post.createdAt).toLocaleDateString() %></small>
                                    <small><i class="far fa-user me-1"></i> <%- user.username %></small>
                                </div>
                                <p class="card-text">
                                    <%- post.content %>
                                </p>
                                <% if (post.tags?.length > 0) { %>
                                    <p class="text-muted">Tags: 
                                        <% post.tags.forEach(tag => { %>
                                            <span class="badge bg-secondary"><%- tag.name %></span>
                                        <% }); %>
                                    </p>
                                <% } %>
                            </div>
                        </div>
    
                        <!-- Comments Section -->
                        <section class="comments-section">
                            <h4 class="mb-4">Comments</h4>
                            <div id="comments-list" class="list-group mb-4">
                                <!-- Comments will be loaded dynamically -->
                            </div>
                            <form id="comment-form" class="needs-validation" novalidate>
                                <input type="hidden" id="postId" value="<%- post._id %>">
                                <div class="mb-3">
                                    <label for="author" class="form-label">Name:</label>
                                    <input type="text" id="author" class="form-control" required>
                                    <div class="invalid-feedback">Please enter your name.</div>
                                </div>
                                <div class="mb-3">
                                    <label for="content" class="form-label">Comment:</label>
                                    <textarea id="content" class="form-control" rows="3" required></textarea>
                                    <div class="invalid-feedback">Please enter a comment.</div>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Submit</button>
                            </form>
                        </section>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <%- include('./partials/footer.ejs') %>

    <!-- JS here -->
    <script src="/js/vendor/modernizr-3.5.0.min.js"></script>
    <script src="/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.slicknav.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/slick.min.js"></script>
    <script src="/js/gijgo.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/animated.headline.js"></script>
    <script src="/js/jquery.magnific-popup.js"></script>
    <script src="/js/jquery.ticker.js"></script>
    <script src="/js/site.js"></script>
    <script src="/js/jquery.scrollUp.min.js"></script>
    <script src="/js/jquery.nice-select.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>
    <script src="/js/contact.js"></script>
    <script src="/js/jquery.form.js"></script>
    <script src="/js/jquery.validate.min.js"></script>
    <script src="/js/mail-script.js"></script>
    <script src="/js/jquery.ajaxchimp.min.js"></script>
    <script src="/js/plugins.js"></script>
    <script src="/js/main.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</body>

</html>
